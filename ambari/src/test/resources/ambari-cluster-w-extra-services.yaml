location: AWS-US-WEST-1-CENTOS6
services:
- type: io.brooklyn.ambari.AmbariCluster
  name: Ambari Cluster
  brooklyn.config:
    version: 2.1.0
    ambaricluster.serverspec:
      $brooklyn:entitySpec:
        type: io.brooklyn.ambari.server.AmbariServer
        brooklyn.config:
          provisioning.properties:
            customizers:
            - $brooklyn:object:
                type: com.canopy.location.customizer.CommonSecurityGroupJcloudsLocationCustomizer
    ambaricluster.agentspec:
      $brooklyn:entitySpec:
        type: io.brooklyn.ambari.agent.AmbariAgent
        brooklyn.config:
          provisioning.properties:
            customizers:
            - $brooklyn:object:
                type: com.canopy.location.customizer.CommonSecurityGroupJcloudsLocationCustomizer
    ambariConfigMap:
      hdfs-site:
        dfs.webhdfs.enabled: true
        dfs.permissions.enabled: false
      httpfs-site:
        httpfs.proxyuser.hue: '*'
        httpfs.proxyuser.hue.groups: '*'
    initialSize: 3
    services:
    - GANGLIA
    - HBASE
    - HDFS
    - MAPREDUCE2
    - YARN
    - ZOOKEEPER
    extraServices:
      $brooklyn:entitySpec:
        type: io.brooklyn.ambari.service.Ranger
        brooklyn.config:
          serviceName: RANGER